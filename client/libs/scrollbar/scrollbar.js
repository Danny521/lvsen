/*! tinyscrollbar - v2.0.0 - 2014-01-06
 * http://www.baijs.com/tinyscrollbar
 *
 * Copyright (c) 2014 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){function t(t,n){function S(){r.update();T();return r}function x(){a.css(E,c/v);s.css(E,-c);g=a.offset()[E];o.css(w,p);u.css(w,p);a.css(w,d)}function T(){if(b){i[0].ontouchstart=function(e){if(1===e.touches.length){N(e.touches[0]);e.stopPropagation()}}}else{a.bind("mousedown",N);u.bind("mouseup",k)}if(n.wheel&&window.addEventListener){t[0].addEventListener("DOMMouseScroll",C,false);t[0].addEventListener("mousewheel",C,false)}else if(n.wheel){t[0].onmousewheel=C}}function N(t){e("body").addClass("noSelect");g=y?t.pageX:t.pageY;m=parseInt(a.css(E),10)||0;if(b){document.ontouchmove=function(e){e.preventDefault();k(e.touches[0])};document.ontouchend=L}else{e(document).bind("mousemove",k);e(document).bind("mouseup",L);a.bind("mouseup",L)}}function C(t){if(h<1){var r=t||window.event,i=r.wheelDelta?r.wheelDelta/120:-r.detail/3;c-=i*n.wheelSpeed;c=Math.min(l-f,Math.max(0,c));a.css(E,c/v);s.css(E,-c);if(n.wheelLock||c!==l-f&&c!==0){r=e.event.fix(r);r.preventDefault()}}}function k(e){if(h<1){mousePositionNew=y?e.pageX:e.pageY;thumbPositionDelta=mousePositionNew-g;if(n.scrollInvert){thumbPositionDelta=g-mousePositionNew}thumbPositionNew=Math.min(p-d,Math.max(0,m+thumbPositionDelta));c=thumbPositionNew*v;a.css(E,thumbPositionNew);s.css(E,-c)}}function L(){e("body").removeClass("noSelect");e(document).unbind("mousemove",k);e(document).unbind("mouseup",L);a.unbind("mouseup",L);document.ontouchmove=document.ontouchend=null}var r=this,i=t.find(".viewport"),s=t.find(".overview"),o=t.find(".scrollbar"),u=o.find(".track"),a=o.find(".thumb"),f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=n.axis==="x",b="ontouchstart"in document.documentElement,w=y?"width":"height",E=y?"left":"top";this.update=function(e){var t=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();f=i[0]["offset"+t];l=s[0]["scroll"+t];h=f/l;p=n.trackSize||f;d=Math.min(p,Math.max(0,n.thumbSize||p*h));v=n.thumbSize?(l-f)/(p-d):l/p;o.toggleClass("disable",h>=1);switch(e){case"bottom":c=l-f;break;case"relative":c=h>=1?0:Math.min(l-f,Math.max(0,c));break;default:c=parseInt(e,10)||0}x()};return S()}e.tiny=e.tiny||{};e.tiny.scrollbar={options:{axis:"y",wheel:true,wheelSpeed:40,wheelLock:true,scrollInvert:false,trackSize:false,thumbSize:false}};e.fn.tinyscrollbar=function(n){var r=e.extend({},e.tiny.scrollbar.options,n);this.each(function(){e(this).data("tsb",new t(e(this),r))});return this};e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}});